apply plugin: 'com.github.johnrengelman.shadow'

dependencies {
  compile 'com.squareup.retrofit2:retrofit:2.1.0'
  compile 'com.squareup.retrofit2:converter-gson:2.1.0'
  compile 'com.squareup.okhttp3:logging-interceptor:3.3.1'
  compile 'com.github.spullara.cli-parser:cli-parser:1.1.2'
  compile 'org.slf4j:slf4j-log4j12:1.7.21'
  compile project(':protocol')
}

shadowJar {
  manifest {
    attributes 'Main-Class': 'com.jetbrains.pluginverifier.client.Client'
  }
}

task sourcesJar(type: Jar) {
  classifier = 'sources'
  from sourceSets.main.allSource
}

artifacts.archives sourcesJar

jar.finalizedBy(shadowJar)