apply plugin: 'com.github.johnrengelman.shadow'

dependencies {
  compile 'com.squareup.retrofit2:retrofit:2.1.0'
  compile 'com.squareup.retrofit2:converter-gson:2.1.0'
  compile 'com.squareup.okhttp3:logging-interceptor:3.3.1'
  compile 'com.github.spullara.cli-parser:cli-parser:1.1.2'
  compile group: 'org.jetbrains.intellij.plugins', name: 'verifier-parameters', version: rootProject.verifierVersion
  compile group: 'ch.qos.logback', name: 'logback-classic', version: '1.1.7'
  compile project(':protocol')
}

shadowJar {
  manifest {
    attributes 'Main-Class': 'com.jetbrains.pluginverifier.client.Client'
  }
}

task sourcesJar(type: Jar) {
  classifier = 'sources'
  from sourceSets.main.allSource
}

artifacts.archives sourcesJar

jar.finalizedBy(shadowJar)